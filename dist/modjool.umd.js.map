{"version":3,"file":"modjool.umd.js","sources":["../src/modjool/config/config.js","../src/modjool/state.js","../src/modjool/whenready.js","../src/modjool/create.js","../src/modjool/methods/utils.js","../src/modjool/methods/update-attributes.js","../src/modjool/methods/update-slots.js","../src/modjool/methods/update-body.js","../src/modjool/methods/update.js","../src/modjool/methods/changed.js","../src/modjool/methods/proxies.js","../src/modjool/config/keywords.js","../src/modjool/methods/constructor.js","../src/modjool/methods/observe.js","../src/modjool/methods/adopted.js","../src/modjool/methods/connected.js","../src/modjool/methods/disconnected.js","../src/modjool/element.js","../src/modjool/modjool.js","../src/modjool/modjoolLite.js"],"sourcesContent":["/**\r\n * Default options object for modjool.create()\r\n */\r\nexport default {\r\n  tag: 'no-name',\r\n  attr: [],\r\n  shadowDom: false,\r\n  modjoolId: true,\r\n  scopedCss: true,\r\n  unhide: false,\r\n  reactive: true,\r\n  enter: undefined,\r\n  ready: undefined,\r\n  js: undefined,\r\n  complete: undefined,\r\n  leave: undefined,\r\n  html: () => '',\r\n  css: () => '',\r\n}\r\n","import config from './config/config.js'\r\n\r\n/**\r\n * Keeps track of the state of Modjool. New elements are added and removed\r\n * as they are added and removed from the page.\r\n */\r\nexport default {\r\n  config: config,\r\n  warnings: [],\r\n\r\n  classes: [],\r\n  elements: [],\r\n\r\n  /**\r\n   * Adds an element to the elements array\r\n   * @param {ModjoolElement} newElement - The element to be added\r\n   */\r\n  addElement (newElement) {\r\n    this.elements.push(newElement)\r\n  },\r\n\r\n  /**\r\n   * Removes an element from the elements array\r\n   * @param {ModjoolElement} oldElement - The element to be removed\r\n   */\r\n  removeElement (oldElement) {\r\n    this.elements = this.elements.filter(el => el  !== oldElement)\r\n  },\r\n\r\n  /**\r\n   * Returns a list of elements that are  defined, and currently attached to the DOM,\r\n   * that match the elementTag. If no argument, return all currently defined elements\r\n   * @param {String} elementTag - The tag of the custom element\r\n   * @returns {Array} - Array of selected elements\r\n   */\r\n  getElements (elementTag) {\r\n  // noinspection JSIncompatibleTypesComparison\r\n    return elementTag ? this.elements.filter(el => el.mj.tag === elementTag) : this.elements\r\n  }\r\n}\r\n","/**\r\n * Runs func when the entire DOM has loaded\r\n * @param {Function} func - The function to be run\r\n */\r\nexport default function (func) {\r\n  if (document.readyState === 'interactive' || document.readyState === 'complete') {\r\n    func()\r\n  } else {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      func()\r\n    })\r\n  }\r\n}\r\n","import whenReady from './whenready.js'\r\n/**\r\n * Defines or creates custom element classes from createElement function.\r\n *\r\n * If define === true:\r\n *   Create and define custom elements\r\n *   Return result (options object or array of option objects used for Modjool definition)\r\n *\r\n * If define === false:\r\n *   Create custom element classes, but do not define\r\n *   Return result (class or array of classes to be used for custom element definition)\r\n *\r\n * Execution process:\r\n *   1. If options not passed, define all elements not currently defined, return true\r\n *   2. If array passed, define all elements, return array of results\r\n *   3. Else, create single element, if successful, return result\r\n *   4. Return false if problem\r\n *\r\n * @param {Function} createElement - Function to build ModjoolElement or ModjoolLiteElement\r\n * @param {Object|Array|String} options - Options provided by modjool.create()\r\n * @param {Boolean} define - Will define element, and return options if true\r\n * @returns {Object|Class|Array<Object|Class>|Boolean} - See above. All 3 processes return false if failed\r\n */\r\nexport default function (createElement, options = [], define = true) {\r\n  options = options.length === 1 ? options[0] : options\r\n  if (Array.isArray(options)) {\r\n    if (options.length === 0) {\r\n      whenReady(() => defineAll(createElement))\r\n      return true\r\n    }\r\n    const result = []\r\n    for (const option of options) {\r\n      result.push(createSingle(createElement, option, define))\r\n    }\r\n    const allSuccessful = result.every(res => res !== false)\r\n    return allSuccessful ? result : false\r\n  } else {\r\n    return createSingle(createElement, options, define)\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a single ModjoolElement or ModjoolLiteElement. If a string is passed as options,\r\n * send false to createElement(), to denote a simple API call. If define === true,\r\n * returns the class instead of defining and returning options.\r\n * @param {Function} createElement - Function to build ModjoolElement or ModjoolLiteElement\r\n * @param {Object|String} options - Options provided by modjool.create()\r\n * @param {Boolean} define - Will define element, and return options if true\r\n * @returns {Object|Class|false} - True if successful, false if not\r\n */\r\nfunction createSingle (createElement, options, define = true) {\r\n  const isString = typeof options === 'string' || options instanceof String\r\n  const customElement = createElement(options, !isString)\r\n  if (define !== true) {\r\n    return customElement.class || false\r\n  }\r\n  try {\r\n    customElements.define(customElement.tag, customElement.class)\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n  return customElements.get(customElement.tag) ? customElement.options : false\r\n}\r\n\r\n/**\r\n * Finds all non-defined custom elements, and defines them using createSingle()\r\n * @param {Function} createElement - Function to build ModjoolElement or ModjoolLiteElement\r\n * @returns {Array} - List of all successfully defined custom element options objects\r\n */\r\nfunction defineAll(createElement) {\r\n  const notDefined = document.querySelectorAll(':not(:defined)')\r\n  const list = []\r\n  for (const el of notDefined) {\r\n    if (!list.includes(el.tagName)) {\r\n      createSingle(createElement, el.tagName.toLowerCase() || el.nodeName.toLowerCase() ||el.localName)\r\n      list.push(el.tagName)\r\n    }\r\n  }\r\n  return list\r\n}\r\n","/**\r\n * Runs the lifecycle event as specified by apiProp\r\n * Execution process:\r\n *   1. If already running lifecycle, return null\r\n *   2. If new property set, run it and finish\r\n *   3. If property in options, run it, and pass extra properties to instance, if set\r\n *   4. Else (the property has not been set), return null\r\n * @param {ModjoolElement} context\r\n * @param {Object} options - The custom element's options\r\n * @param {String} apiProp - The name of the API property\r\n * @param {Object} extra - Any extra properties to be passed to the API method\r\n * @returns {null|Object} - Null if failed, otherwise function result or {} if no result\r\n */\r\nfunction runLifecycle (context, options, apiProp, extra = false) {\r\n  const { mj } = context\r\n  let result = null\r\n  let alreadyRunningLifecycle = mj.runningLifecycle\r\n\r\n  // If not running during lifecycle, change state\r\n  if (!alreadyRunningLifecycle) {\r\n    mj.runningLifecycle = true\r\n  }\r\n\r\n  // If new replacement lifecycle event has been set, run it\r\n  if (mj.new && mj.new[apiProp] !== null && mj.new[apiProp] !== undefined) {\r\n    result = mj.new[apiProp]() || undefined\r\n  }\r\n\r\n  // Run regular lifecycle, add extra options if needed\r\n  if (result === null && options[apiProp] !== undefined) {\r\n    result = (extra ? options[apiProp]({ ...mj.instance, ...extra }) : options[apiProp](mj.instance)) || undefined\r\n  }\r\n\r\n  // If lifecycle started in this function, complete lifecycle\r\n  if (!alreadyRunningLifecycle) {\r\n    mj.runningLifecycle = false\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n/**\r\n * Returns a shortcut function for context.querySelector, compatible with\r\n * tagged template literals, and regular strings.\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @param {Boolean} findAll - Optional, return querySelectorAll\r\n * @returns {function(String|Array, ...[String]): *}\r\n */\r\nfunction findFunction (context, options, findAll = false) {\r\n  return function (strings, ...values) {\r\n    let str\r\n    if (typeof strings === 'string' || strings instanceof String) {\r\n      str = strings\r\n    } else {\r\n      // Build template string\r\n      str = strings[0]\r\n      for (let i = 0; i < values.length; i++) {\r\n        str += values[i] + strings[i + 1]\r\n      }\r\n    }\r\n    return findAll ? context.mj.body.querySelectorAll(str) : context.mj.body.querySelector(str)\r\n  }\r\n}\r\n\r\n/**\r\n * Converts kebab-case to camelCase\r\n * Uses a cache for speed\r\n * @type {function(*): *}\r\n * @param {String} - String to convert\r\n * @returns {String} - Converted string\r\n */\r\nconst kebabToCamel = kebabCamelCache()\r\n\r\n/**\r\n * Converts camelCase to kebab-case\r\n * Uses a cache for speed\r\n * @type {function(*): *}\r\n * @param {String} - String to convert\r\n * @returns {String} - Converted string\r\n */\r\nconst camelToKebab = kebabCamelCache(true)\r\n\r\nexport { runLifecycle, findFunction, kebabToCamel, camelToKebab }\r\n\r\n/**\r\n * Creates a cache of kebab-case to camelCase conversions, and vice-versa\r\n * Returns two functions, one for conversion either way, returning\r\n * from cache if already converted\r\n * @param {Boolean} camelToKebab - If true, convert FROM camel, instead of TO\r\n * @returns {function(*): (*)} -\r\n */\r\nfunction kebabCamelCache (camelToKebab = false) {\r\n  const camelCache = {}\r\n  const kebabCache = {}\r\n\r\n  if (camelToKebab) {\r\n    // camelCase to kebab-case\r\n    return function (str) {\r\n      // Check cache\r\n      if (camelCache[str]) {\r\n        return camelCache[str]\r\n      }\r\n\r\n      // Return str if not camelCase (has any capital letters)\r\n      if (str === str.toLowerCase()) {\r\n        return str\r\n      }\r\n\r\n      // Convert, add to cache, return\r\n      const result = str.replace(/[A-Z]/g, \"-$&\").toLowerCase()\r\n      camelCache[str] = result\r\n      kebabCache[result] = str\r\n      return result\r\n    }\r\n  }\r\n\r\n  // kebab-case to camelCase\r\n  // (quicker than regex in every browser but Firefox)\r\n  return function (str) {\r\n    // Check cache\r\n    if (kebabCache[str]) {\r\n      return kebabCache[str]\r\n    }\r\n\r\n    // Return str if not kebab case (has any hyphens)\r\n    if (!str.includes('-')) {\r\n      return str\r\n    }\r\n\r\n    // Convert, add to cache, return\r\n    const result = str\r\n      .split('-')\r\n      .map((item, index) =>\r\n        index\r\n          ? item.charAt(0).toUpperCase() + item.slice(1).toLowerCase()\r\n          : item.toLowerCase())\r\n      .join(\"\")\r\n    kebabCache[str] = result\r\n    camelCache[result] = str\r\n    return result\r\n  }\r\n}","import { kebabToCamel } from './utils.js'\r\n\r\n/**\r\n * If element connected, retrieve and set attributes\r\n * Add proxy to attr, to monitor for changes in the modjool API\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction updateAttributes (context, options) {\r\n  if (context.isConnected) {\r\n    context.mj.settingAttributes = true\r\n    context.mj.attributes = {}\r\n    for (let i = 0; i < context.attributes.length; i++) {\r\n      const prop = context.attributes[i].nodeName.toLowerCase()\r\n      if (!prop.toLowerCase().startsWith('mj-')) {\r\n        let val = context.attributes[i].nodeValue\r\n        if (val === '') {\r\n          val = true\r\n        }\r\n        context.mj.attributes[kebabToCamel(prop)] = val\r\n      }\r\n    }\r\n    setAttr(context, options, context.mj.attributes)\r\n    context.mj.settingAttributes = false\r\n  }\r\n}\r\n\r\nexport { updateAttributes }\r\n\r\n/**\r\n * Delete all attributes from attr proxy element, then add new\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @param {Object} attributes - The new attributes\r\n */\r\nfunction setAttr (context, options, attributes) {\r\n  const attr = context.mj.instance.attr\r\n  for (const prop of Object.keys(attr)) {\r\n    delete attr[prop]\r\n  }\r\n\r\n  for (const [key, val] of Object.entries(attributes)) {\r\n    attr[key] = val\r\n  }\r\n}","/**\r\n * If element connected, get and set slot and slotVal\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction updateSlots (context, options) {\r\n  if (context.isConnected) {\r\n    const { slot, slotVal } = getSlotContent(context, options)\r\n    context.mj.instance.slot = slot\r\n    context.mj.instance.slotVal = slotVal\r\n  }\r\n}\r\n\r\nexport { updateSlots }\r\n\r\n/**\r\n * Gets slot and slotVal content. If multiple slots, return an object with \r\n * slot names as properties. Only top-level elements returned as slots.\r\n * Explained:\r\n *   slot: HTML required to output the current slot in html() or css()\r\n *   slotVal: The HTML content of the slot as a string\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @returns {Object} - slot & slotVal content\r\n */\r\nfunction getSlotContent (context, options) {\r\n  let slot\r\n  let slotVal\r\n  const tempId = 'mj-8Wi7fiDtPtAWMhLQop1Smg'\r\n  const bodyFrag = createElement(context.mj.bodyContent, tempId)\r\n  const slotList = bodyFrag.querySelectorAll(`#${tempId} > [slot]`)\r\n\r\n  if (slotList.length > 0) {\r\n    // Multiple slots\r\n    slot = {}\r\n    slotVal = {}\r\n\r\n    for (const s of slotList) {\r\n      const slotName = s.getAttribute('slot')\r\n      slotVal[slotName] = s.innerHTML\r\n      slot[slotName] = options.shadowDom ? `<slot name=\"${slotName}\"></slot>` : s.outerHTML\r\n    }\r\n\r\n  } else {\r\n    // Single slot\r\n    const shadowSlot = context.mj.bodyContent.length ? '<slot></slot>' : ''\r\n    slotVal = context.mj.bodyContent\r\n    slot = options.shadowDom ? shadowSlot : context.mj.bodyContent\r\n  }\r\n  return { slot, slotVal }\r\n}\r\n\r\n/**\r\n * Create an document fragment containing a specified element, and returns it,\r\n * contained in a div element with the ID specified\r\n * @param {String} htmlString - innerHTML of element\r\n * @param {String} id - ID of parent element\r\n * @returns {DocumentFragment} - Fragment containing parsed htmlString\r\n */\r\nfunction createElement (htmlString, id = '') {\r\n  const frag = document.createDocumentFragment()\r\n  const elem = document.createElement('div')\r\n  elem.innerHTML = htmlString\r\n  elem.id = id\r\n  frag.appendChild(elem)\r\n  return frag\r\n}\r\n","/**\r\n * Updates custom element's html and css, if it has changed\r\n * If update request sent while currently running lifecycle event,\r\n * return, and wait for it to finish.\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @param {Boolean} ignoreLifecycle - Ignore running lifecycle and force update\r\n */\r\nfunction updateBody (context, options, ignoreLifecycle = false) {\r\n  if (context.isConnected && (!context.mj.runningLifecycle || ignoreLifecycle)) {\r\n    const newHtml = getHtml(context, options)\r\n    const newCss = getCss(context, options)\r\n    const newBody = newHtml + newCss\r\n\r\n    if (newBody !== context.mj.currentBody) {\r\n      let bodyFrag = document.createDocumentFragment()\r\n      addHtml(bodyFrag, newHtml)\r\n      addCss(bodyFrag, newCss, context, options)\r\n\r\n      deleteElementHtml(context.mj.body)\r\n      context.mj.body.appendChild(bodyFrag)\r\n      context.mj.currentBody = newBody\r\n    }\r\n  }\r\n}\r\n\r\nexport { updateBody }\r\n\r\n/**\r\n * Adds HTML to document fragment\r\n * @param {DocumentFragment} bodyFrag\r\n * @param {String} newHtml\r\n */\r\nfunction addHtml (bodyFrag, newHtml) {\r\n  if (newHtml) {\r\n    const tempEl = document.createElement('template')\r\n    tempEl.innerHTML = newHtml\r\n    bodyFrag.appendChild(tempEl.content)\r\n  }\r\n}\r\n\r\n/**\r\n * Adds CSS to document fragment, in a style tag, with custom mj-id\r\n * @param {DocumentFragment} bodyFrag\r\n * @param {String} newCss\r\n * @param {ModjoolElement} context\r\n * @param {Boolean} scopedCss\r\n */\r\nfunction addCss (bodyFrag, newCss, context, { scopedCss }) {\r\n  if (newCss) {\r\n    const cssTag = document.createElement('style')\r\n    cssTag.setAttribute('id', `mj-style-${context.mj.id}`)\r\n    cssTag.textContent = scopedCss ? addSelector(context.mj.instance.self.select, newCss) : newCss\r\n    bodyFrag.appendChild(cssTag)\r\n  }\r\n}\r\n\r\n/**\r\n * Gets HTML for custom element, and returns\r\n * Returns self.html() if set, then HTML hook, then body content\r\n * @param {ModjoolElement} context\r\n * @param {Function} html\r\n * @returns {String} - updated HTML\r\n */\r\nfunction getHtml (context, { html }) {\r\n  if (context.mj.new.html) {\r\n    return context.mj.new.html({ ...context.mj.instance })\r\n  }\r\n  return html({ ...context.mj.instance }) || context.mj.bodyContent\r\n}\r\n\r\n/**\r\n * Gets CSS for custom element, and returns\r\n * Returns self.css() if set, then CSS hook, then style content\r\n * @param {ModjoolElement} context\r\n * @param {Object} options\r\n * @param {Function} options.css\r\n * @returns {String} - The updated CSS\r\n */\r\nfunction getCss (context, { css }) {\r\n  if (context.mj.new.css) {\r\n    return context.mj.new.css ({ ...context.mj.instance })\r\n  }\r\n  return css({ ...context.mj.instance }) || context.mj.styleContent\r\n}\r\n\r\n/**\r\n * Removes all HTML from element (quicker than innerHTML = '')\r\n * @param {Node} body\r\n */\r\nfunction deleteElementHtml (body) {\r\n  while (body.firstChild) {\r\n    body.removeChild(body.firstChild)\r\n  }\r\n}\r\n\r\n/**\r\n * Adds custom element selector to css and returns\r\n * @param {Function}  selfSelect - CSS selector function for self\r\n * @param {String} css - CSS to change\r\n * @returns {String} - The updated CSS\r\n */\r\nfunction addSelector (selfSelect, css) {\r\n  const selectorRegex = /(?!.*@media)[\\t ]*([a-zA-Z#.:*[][^{/]*\\s*){[\\s\\S]*?}/gm\r\n  return css.replace(selectorRegex, (match, part) => {\r\n    const split = part.trimStart().split(',')\r\n    match = match.trimStart()\r\n    const result = doCommaLoop(selfSelect, match, split)\r\n    return result.join(', ') + match.slice(part.length)\r\n  })\r\n}\r\n\r\n/**\r\n * Loops through selectors, adds self selector to each css selector\r\n * @param {Function} selfSelect\r\n * @param {String} match - Matched regex\r\n * @param {Array} split - Matched regex split into selectors\r\n * @returns {Array} - Updated selectors\r\n */\r\nfunction doCommaLoop (selfSelect, match, split) {\r\n  for (const str in split) {\r\n    const regex = /:self\\(([^\\s]*)\\)/im\r\n    const regRes = split[str].match(regex)\r\n    if (regRes) {\r\n      split[str] = split[str].replace(regRes[0], selfSelect(regRes[1]))\r\n    } else if (split[str].includes(':self')) {\r\n      split[str] = split[str].replace(':self', selfSelect())\r\n    } else {\r\n      split[str] = `${selfSelect()} ${split[str]}`\r\n    }\r\n  }\r\n  return split\r\n}\r\n","import { updateAttributes } from './update-attributes.js'\r\nimport { updateSlots } from './update-slots.js'\r\nimport { updateBody } from './update-body.js'\r\n\r\n/**\r\n * Update element's attributes, slots, and body\r\n * @param {...any} args\r\n * @param {ModjoolElement} args[0] - The custom element\r\n * @param {Object} args[1] - The custom element's options\r\n * @param {Boolean} args[2] - Ignore running lifecycle and force update\r\n */\r\nfunction updateAll (...args) {\r\n  updateAttributes(...args)\r\n  updateSlots(...args)\r\n  updateBody(...args)\r\n}\r\n\r\n/**\r\n * Updates mj.new properties, and then updates body\r\n * apiProp corresponds to the API property name, and newVal its new value\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @param {Object} vals - Object containing new values\r\n */\r\nfunction updateNew (context, options, vals) {\r\n  for (const [apiProp, newVal] of Object.entries(vals)) {\r\n    // noinspection JSUnresolvedVariable\r\n    context.mj.new[apiProp] = newVal\r\n    updateBody(context, options)\r\n  }\r\n}\r\n\r\nexport { updateAttributes, updateSlots, updateBody, updateAll, updateNew }\r\n","import { runLifecycle, kebabToCamel } from './utils.js'\r\nimport { updateBody, updateAttributes } from './update.js'\r\n\r\n/**\r\n * Gets current attributes, runs attribute lifecycle function, and updates body\r\n * Runs complete lifecycle function afterwards\r\n * \r\n * Runs when attributeChangedCallback is called, and an observed attribute is changed\r\n * \r\n * @param {ModjoolElement} context - The custom element to update\r\n * @param {Object} options - The custom element's options\r\n * @param {Object} attr \r\n * @param {String} attr.attrName - Changed attribute name\r\n * @param {String} attr.oldVal - Old attribute value\r\n * @param {String} attr.newVal - New attribute value\r\n */\r\nfunction advanced (context, options, { attrName, oldVal = '', newVal = '' }) {\r\n  const args = [context, options]\r\n  if (context.mj.loaded === true && oldVal !== newVal) {\r\n    const lifecycleName = 'attr_' + kebabToCamel(attrName)\r\n    updateAttributes(...args)\r\n    runLifecycle(context, options, lifecycleName, { oldVal, newVal })\r\n    if (!context.mj.runningLifecycle) {\r\n      updateBody(...args)\r\n      runLifecycle(...args, 'complete')\r\n    }\r\n  }\r\n}\r\n\r\nfunction simple () {}\r\n\r\nexport default { advanced, simple }\r\n","import { updateBody } from './update-body.js'\r\nimport { camelToKebab, runLifecycle } from './utils.js'\r\nimport attributeChanged from './changed.js'\r\n\r\n/**\r\n * Returns a new Proxy element, with a set proxy, attached to proxyObj\r\n * When proxyObj's value changed, set value of this element's corresponding attribute\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @param {Object} proxyObj - The current attribute values\r\n */\r\nfunction attrProxy (context, options, proxyObj = {}) {\r\n  return new Proxy(proxyObj, {\r\n    set (obj, prop, value) {\r\n      if (!context.mj.settingAttributes) {\r\n        context.setAttribute(camelToKebab(prop), value)\r\n      }\r\n      return Reflect.set(...arguments)\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * Returns a new Proxy element, with a set proxy, attached to proxyObj\r\n * When proxyObj's value changed, if not running lifecycle:\r\n *  - Get result of dataDataNameHook\r\n *  - Set if value returned, otherwise use value\r\n *  - Update the body\r\n *  - Run complete() lifecycle event\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @param {Object} proxyObj - The current attribute values\r\n */\r\nfunction dataProxy (context, options, proxyObj = {}) {\r\n  return new Proxy(proxyObj, {\r\n    set (obj, prop, value) {\r\n      if (context.mj.dataInit) {\r\n        return Reflect.set(...arguments)\r\n      }\r\n      const dataHookVal = runLifecycle(context, options, 'data_' + prop, {\r\n        oldVal: obj[prop],\r\n        newVal: value\r\n      })\r\n\r\n      let result\r\n\r\n      // Only sets if not null or undefined\r\n      if (dataHookVal != null) {\r\n        result = Reflect.set(obj, prop, dataHookVal)\r\n      } else {\r\n        result = Reflect.set(...arguments)\r\n      }\r\n\r\n      if (!context.mj.runningLifecycle) {\r\n        updateBody(context, options)\r\n        runLifecycle(context, options, 'complete')\r\n      }\r\n      return result\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * Returns an observing MutationObserver that passes\r\n * attributes changed to the default advanced element handler\r\n * for attributeChangedCallback.\r\n *\r\n * MutationObserver only watches for attribute changes to the\r\n * context element, and not changes to its children or other events.\r\n *\r\n * Limitation: MutationObserver is async; reactive attributes still called\r\n * within complete() due do this.\r\n *\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @returns {MutationObserver} - The observing MutationObserver\r\n */\r\nfunction attrObserver (context, options) {\r\n  const observer = new MutationObserver(mutationList => {\r\n    mutationList.forEach(mutation => {\r\n      if (mutation.type === 'attributes' && context.mj.loaded) {\r\n        if (!mutation.attributeName.startsWith('mj-')) {\r\n        attributeChanged.advanced(context, options, {\r\n          attrName: mutation.attributeName,\r\n          oldVal: mutation.oldValue,\r\n          newVal: context.getAttribute(mutation.attributeName)\r\n        })\r\n        }\r\n      }\r\n    })\r\n  })\r\n\r\n  // Start observing\r\n  observer.observe(context, {\r\n    // Watch for attribute change\r\n    attributes: true,\r\n    // Save old values\r\n    attributeOldValue: true\r\n  })\r\n\r\n  return observer\r\n}\r\n\r\nexport { dataProxy, attrProxy, attrObserver }\r\n","/**\r\n * Blocked keywords, not allowed as custom HTML attributes\r\n */\r\nexport default [\r\n  'tag',\r\n  // 'attr',\r\n  'shadowDom',\r\n  'reactive',\r\n  'modjoolId',\r\n  'unhide',\r\n  'scopedCss',\r\n  'enter',\r\n  'data',\r\n  'ready',\r\n  'js',\r\n  'complete',\r\n  'leave',\r\n  'html',\r\n  'css',\r\n]\r\n","import { updateBody, updateSlots, updateAll, updateNew, updateAttributes } from './update.js'\r\nimport { attrObserver, attrProxy, dataProxy } from './proxies'\r\nimport { runLifecycle, findFunction } from './utils.js'\r\nimport keywords from '../config/keywords.js'\r\n\r\n/**\r\n * Initialises the custom element's mj property, builds shadow DOM,\r\n * then runs enter() lifecycle event\r\n * \r\n * Runs when the custom element's constructor is called\r\n * \r\n * Properties of mj to note: \r\n *   - body, refers to the shadow DOM (if enabled), or the current element\r\n *   - instance, the object sent to the modjool custom element hooks\r\n *     - Includes attr, data, func, self, slot, slotVal\r\n *     - Self contains a number of methods relating to the current body of the element\r\n *   - new, if new API values have been manually set for the element, they are here\r\n * \r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction advanced (context, options) {\r\n  const instanceId = Math.random().toString(36).slice(-6)\r\n  const selector = function (rule = '') {\r\n    if (options.shadowDom) {\r\n      return `:host(${options.tag}[mj-id=\"${instanceId}\"]${rule})`\r\n    } else {\r\n      return `${options.tag}[mj-id=\"${instanceId}\"]${rule}`\r\n    }\r\n  }\r\n  // noinspection JSUnusedGlobalSymbols\r\n  context.mj = {\r\n    tag: options.tag,\r\n    id: instanceId,\r\n    attributes: {},\r\n    observer: {},\r\n    body: {},\r\n    bodyContent: '',\r\n    styleContent: '',\r\n    currentBody: '',\r\n    runningLifecycle: false,\r\n    settingAttributes: false,\r\n    loaded: false,\r\n    reactiveAttributes: options.attributes,\r\n    instance: {\r\n      attr: {},\r\n      data: {},\r\n      elem: {},\r\n      find: findFunction(context, options),\r\n      findAll: findFunction(context, options, true),\r\n      self: {\r\n        id: instanceId,\r\n        tag: options.tag,\r\n        options: options,\r\n        select: selector,\r\n        element: {},\r\n        update: () => {\r\n          updateBody(context, options, true)\r\n          if (!context.mj.runningLifecycle) {\r\n            runLifecycle(context, options, 'complete')\r\n          }\r\n        },\r\n        updateSlot: () => updateSlots(context, options),\r\n        updateAttr: () => updateAttributes(context, options),\r\n        updateAll: () => {\r\n          updateAll(context, options, true)\r\n          if (!context.mj.runningLifecycle) {\r\n            runLifecycle(context, options, 'complete')\r\n          }\r\n        },\r\n        remove: () => context.mj.body.host ? context.mj.body.host.remove() : context.mj.body.remove(),\r\n        css: css => updateNew(context, options, { css }),\r\n        data: data => updateNew(context, options, { data }),\r\n        enter: enter => updateNew(context, options, { enter }),\r\n        html: html => updateNew(context, options, { html }),\r\n        js: js => updateNew(context, options, { js }),\r\n        complete: complete => updateNew(context, options, { complete }),\r\n        leave: leave => updateNew(context, options, { leave }),\r\n        ready: ready => updateNew(context, options, { ready }),\r\n        attrHook: (attrName, func) => {\r\n          // If custom attribute set, and no custom attr observed, then create\r\n          if (!options.attr.length && !context.mj.observer) {\r\n            context.mj.observer = attrObserver(context, options)\r\n          }\r\n          updateNew(context, options, { ['attr_' + attrName]: func })\r\n        },\r\n        dataHook: (dataName, func) => {\r\n          updateNew(context, options, { ['data_' + dataName]: func })\r\n        }\r\n      },\r\n      slot: {},\r\n      slotVal: {}\r\n    },\r\n    new: {\r\n      css: null,\r\n      data: null,\r\n      enter: null,\r\n      html: null,\r\n      js: null,\r\n      leave: null,\r\n      ready: null,\r\n    },\r\n    options: options\r\n  }\r\n\r\n  // Create reactive features\r\n  if (options.reactive) {\r\n    // Create attr & data instance param proxies\r\n    context.mj.instance.attr = attrProxy(context, options, {})\r\n    context.mj.instance.data = dataProxy(context, options, {})\r\n\r\n    // Create attribute MutationObserver if reactive attr not set manually\r\n    if (!options.attr.length && optionsContainsCustomHook(options)) {\r\n      context.mj.observer = attrObserver(context, options)\r\n    }\r\n  }\r\n\r\n  // Create shadow DOM, if enabled\r\n  if (options.shadowDom) {\r\n    context.attachShadow({ mode: 'open' })\r\n    context.mj.body = context.shadowRoot\r\n  } else {\r\n    context.mj.body = context\r\n  }\r\n\r\n  // If shadow DOM, set self.element to the host (the element containing the shadow DOM)\r\n  context.mj.instance.self.element = context.mj.body.host ? context.mj.body.host : context.mj.body\r\n  context.mj.instance.elem = context.mj.instance.self.element\r\n\r\n  // Constructor complete, run \"enter\" lifecycle\r\n  context.mj.constructorRun = true\r\n  runLifecycle(context, options, 'enter')\r\n}\r\n\r\nfunction simple () {}\r\n\r\nexport default { advanced, simple }\r\n\r\nfunction optionsContainsCustomHook (options) {\r\n  for (const option of Object.keys(options)) {\r\n    if (!keywords.includes(option)) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n","import keywords from '../config/keywords.js'\r\n\r\n/**\r\n * If attributes set in options, retrieve and pass to browser for observation\r\n * Runs when observedAttributes is called, before element construction\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n * @returns {Array} - Array of observed attributes\r\n */\r\nfunction advanced (context, options) {\r\n  if (options.attr !== undefined) {\r\n    return options.attr.map(attr => {\r\n      attr = attr.toLowerCase()\r\n      if (!keywords.includes(attr)) {\r\n        return attr\r\n      } else {\r\n        console.error(`[Modjool] ERROR: Keyword used as element attribute name [${attr}]`)\r\n      }\r\n    })\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nfunction simple () {}\r\n\r\nexport default { advanced, simple }\r\n","import { runLifecycle } from './utils.js'\r\nimport { updateBody } from './update-body.js'\r\n\r\n/**\r\n * Runs js() lifecycle event, if it exists, with an extra property indicating it has been adopted\r\n * Then run complete()\r\n * Runs when adoptedCallback has been called, and element has been moved to another document\r\n * @param {ModjoolElement} context - The custom element to update\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction advanced (context, options) {\r\n  if (runLifecycle(context, options, 'js', { adopted: true }) !== null) {\r\n    updateBody(context, options)\r\n  }\r\n  runLifecycle(context, options, 'complete')\r\n}\r\n\r\nfunction simple () { }\r\n\r\nexport default { advanced, simple }\r\n","import state from '../state.js'\r\nimport whenReady from '../whenready'\r\nimport { runLifecycle } from './utils.js'\r\nimport { updateBody, updateSlots, updateAttributes } from './update.js'\r\n\r\n/**\r\n * Initialises the custom element, after it's added to the page\r\n * Runs when connectedCallback is called, and element is added to DOM\r\n * \r\n * Execution process:\r\n *   1. Wait for parents to be defined\r\n *   2. Get attributes, slots, data\r\n *   3. Run ready() lifecycle event, and update body (get html() and css())\r\n *   4. Unhide element if enabled, context.mj.loaded = true\r\n *   5. If js() used, run js() lifecycle event if given, then update body again\r\n *   6. Run complete() lifecycle event\r\n *   7. Add to defined elements, and dispatch mj-defined custom event\r\n * \r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction advanced (context, options) {\r\n  const args = [context, options]\r\n  if (!context.mj.alreadyConnected) {\r\n    context.mj.alreadyConnected = true\r\n\r\n    whenReady(() => {\r\n      if (!options.shadowDom) {\r\n        waitForParentElements(context, () => connectToDom())\r\n      } else {\r\n        connectToDom()\r\n      }\r\n    })\r\n\r\n    function connectToDom () {\r\n      context.mj.bodyContent = context.innerHTML\r\n      initPrivateId(...args)\r\n\r\n      updateAttributes(...args)\r\n      updateSlots(...args)\r\n      setData(...args, context.mj.new.data || runLifecycle(context, options, 'data') || {})\r\n      runLifecycle(context, options, 'ready')\r\n      updateBody(...args)\r\n\r\n      unhideElement(...args)\r\n      context.mj.loaded = true\r\n\r\n      runLifecycle(context, options, 'js')\r\n      runReactiveHooks(context, options)\r\n      updateBody(context, options)\r\n\r\n      runLifecycle(context, options, 'complete')\r\n      state.addElement(context)\r\n      context.dispatchEvent(new Event('mj-defined'))\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Adds element to list of elements, dispatches mj-defined custom event\r\n * Runs when simple element is connected to DOM\r\n * @param {ModjoolElement} context - the custom element to update\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction simple (context, options) {\r\n  context.mj = {}\r\n  context.mj.tag = options.tag\r\n  state.addElement(context)\r\n  context.dispatchEvent(new Event('mj-defined'))\r\n}\r\n\r\nexport default { advanced, simple }\r\n\r\n/**\r\n * Runs all attr_[name] and data_[prop] functions, in that order\r\n * Updates data properties if value returned\r\n * @param {ModjoolElement} context - the custom element to update\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction runReactiveHooks (context, options) {\r\n  if (context.mj.instance) {\r\n    context.mj.runningLifecycle = true\r\n    runAttr()\r\n    runData()\r\n    context.mj.runningLifecycle = false\r\n  }\r\n\r\n  // Iterate through attributes, run lifecycle for each\r\n  function runAttr () {\r\n    for (let name in context.mj.attributes) {\r\n      const lifecycleName = 'attr_' + name\r\n      const attrValue = context.mj.attributes[name]\r\n      runLifecycle(context, options, lifecycleName, {\r\n        newVal: attrValue\r\n      })\r\n    }\r\n  }\r\n\r\n  // Iterate through data properties, run lifecycle for each, set new value\r\n  function runData () {\r\n    context.mj.dataInit = true\r\n    for (let prop in context.mj.instance.data) {\r\n      const lifecycleName = 'data_' + prop\r\n      const dataValue = context.mj.instance.data[prop]\r\n      const dataHookVal  = runLifecycle(context, options, lifecycleName, {\r\n        newVal: dataValue\r\n      })\r\n\r\n      // Only sets if not null or undefined\r\n      if (dataHookVal != null) {\r\n        context.mj.instance.data[prop] = dataHookVal\r\n      }\r\n    }\r\n    context.mj.dataInit = false\r\n  }\r\n}\r\n\r\n/**\r\n * Iterates through data and sets the same values to mj.instance.data\r\n * @param {ModjoolElement} context - the custom element to update\r\n * @param {Object} options - The custom element's options\r\n * @param {Object} data - The new data value\r\n */\r\nfunction setData (context, options, data) {\r\n  if (data === null) {\r\n    return null\r\n  }\r\n\r\n  context.mj.dataInit = true\r\n  for (const [prop, val] of Object.entries(data)) {\r\n    context.mj.instance.data[prop] = val\r\n  }\r\n  context.mj.dataInit = false\r\n}\r\n\r\n/**\r\n * Waits for parent elements to define themselves, before running func.\r\n * Execution process:\r\n *   1. If constructor already run, continue, else do nothing and finish\r\n *   2. If element has any non-defined custom element parents, run func and finish\r\n *   3. Add mj-defined custom event to non-defined parent element\r\n *   4. When parent executes mj-defined, recursively check for more parents\r\n *   5. Repeat until finish\r\n * @param {ModjoolElement} context\r\n * @param {Function} func - Function to be run when ready\r\n */\r\nfunction waitForParentElements (context, func) {\r\n  if (context.mj.constructorRun) {\r\n    try {\r\n      const closest = context.closest(':not(:defined)')\r\n      if (closest === null) {\r\n        func()\r\n      } else {\r\n        const definedFunc = () => {\r\n          // Check for more non-defined elements\r\n          waitForParentElements(context, func)\r\n          // When called, remove this listener from newly defined parent\r\n          closest.removeEventListener('mj-defined', definedFunc)\r\n        }\r\n        // Wait for parent element to be defined, then call definedFunc\r\n        closest.addEventListener('mj-defined', definedFunc)\r\n      }\r\n    } catch (err) {\r\n      // If warning not already logged\r\n      if (!state.warnings.includes(':defined') && err.toString().includes(':defined')) {\r\n        state.warnings.push(':defined')\r\n        console.warn('[Modjool] Browser does not support :defined CSS selector, possible custom element nesting bugs')\r\n        func()\r\n      } else {\r\n        console.error(err)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * If options.id is true, set mj-id attribute to context.mj.id value\r\n * @param {ModjoolElement} context\r\n * @param {Object} options\r\n */\r\nfunction initPrivateId (context, options) {\r\n  if (options.modjoolId) {\r\n    context.setAttribute('mj-id', context.mj.id)\r\n  }\r\n}\r\n\r\n/**\r\n * If options.unhide is true, unhide object by removing hidden attribute\r\n * @param {ModjoolElement} context \r\n * @param {Object} options \r\n */\r\nfunction unhideElement (context, options) {\r\n  if (options.unhide) {\r\n    context.removeAttribute('hidden')\r\n  }\r\n}\r\n","import state from '../state.js'\r\nimport { runLifecycle } from './utils.js'\r\n\r\n/**\r\n * Runs the leave() lifecycle event, empties body & mj, removes element from state\r\n * Runs when disconnectedCallback is called, and element is removed from DOM\r\n * @param {ModjoolElement} context - The custom element\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction advanced (context, options) {\r\n  runLifecycle(context, options, 'leave')  \r\n  context.mj.body.innerHTML = ''\r\n  if (context.mj.observer && context.mj.observer.disconnect) {\r\n    context.mj.observer.disconnect()\r\n  }\r\n  state.removeElement(context)\r\n}\r\n\r\n/**\r\n * Removes element from state\r\n * Runs when disconnectedCallback is called, and element is removed from DOM\r\n * @param {ModjoolElement} context - The custom element to update\r\n * @param {Object} options - The custom element's options\r\n */\r\nfunction simple (context, options) {\r\n state.removeElement(context)\r\n}\r\n\r\nexport default { advanced, simple }\r\n","import state from './state.js'\r\n\r\nimport CONSTRUCTOR from './methods/constructor.js'\r\nimport OBSERVE from './methods/observe.js'\r\nimport ADOPTED from './methods/adopted.js'\r\nimport CHANGED from './methods/changed.js'\r\nimport CONNECTED from './methods/connected.js'\r\nimport DISCONNECTED from './methods/disconnected.js'\r\n\r\n/**\r\n * Creates a ModjoolElement class, and returns the class.\r\n * All methods call either an advanced or simple function, depending on type.\r\n * @param {Object|String} options - Options for this element, a tag name string if simple\r\n * @param {Boolean} advancedApi - True if advanced API used, false if not\r\n * @returns {Object} - The defined class, tag, and options\r\n */\r\nfunction elementCreator (options, advancedApi) {\r\n  const elementType = advancedApi ? 'advanced' : 'simple'\r\n  \r\n  // noinspection JSUnusedGlobalSymbols\r\n  class ModjoolElement extends HTMLElement {\r\n    // Invoked instantly\r\n    constructor (...args) {\r\n      // noinspection all\r\n      const polyfill = super(...args)\r\n      this.mj = {}\r\n      CONSTRUCTOR[elementType](this, options)\r\n      return polyfill\r\n    }\r\n\r\n    // Invoked directly after constructor\r\n    static get observedAttributes () {\r\n      return OBSERVE[elementType](this, options)\r\n    }\r\n\r\n    // Invoked when observed attribute is changed\r\n    attributeChangedCallback (attrName, oldVal, newVal) {\r\n      CHANGED[elementType](this, options, { attrName, oldVal, newVal })\r\n    }\r\n\r\n    // Invoked when element added to DOM\r\n    connectedCallback () {\r\n      CONNECTED[elementType](this, options)\r\n    }\r\n\r\n    // Invoked when element moved to new document\r\n    adoptedCallback () {\r\n      ADOPTED[elementType](this, options)\r\n    }\r\n\r\n    // Invoked when element removed from DOM\r\n    disconnectedCallback () {\r\n      DISCONNECTED[elementType](this, options)\r\n      this.mj = {}\r\n    }\r\n  }\r\n\r\n  // noinspection JSUnresolvedVariable\r\n  return {\r\n    tag: advancedApi ? options.tag : options,\r\n    options: options,\r\n    class: ModjoolElement\r\n  }\r\n}\r\n\r\n/**\r\n * Combines options with default, waits until page is ready, then runs elementCreator\r\n * @param {Boolean} advancedApi - True if advanced API used, false if not\r\n * @param {Object|String} options - Options for this element, a tag name string if simple\r\n * @returns {Object} - The defined class, tag, and options\r\n */\r\nexport default function (options, advancedApi) {\r\n  if (advancedApi) {\r\n    options = { ...state.config, ...options }\r\n  }\r\n  return elementCreator(options, advancedApi)\r\n}\r\n","import state from './state.js'\r\nimport createElement from './create.js'\r\nimport ModjoolElement from './element.js'\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport default {\r\n  create,\r\n  createClass,\r\n  createUndefined,\r\n  options, \r\n  get, \r\n  getAsync, \r\n  getUndefined, \r\n  getUndefinedAsync,\r\n  complete,\r\n  wait\r\n}\r\n\r\n/**\r\n * Creates and defines one or more Modjool elements, using the advanced or simple API\r\n * Returns options object, or array of options objects\r\n * @param  {...Array|Object|String} options - One of four inputs:\r\n *   1. An array of objects for the advanced API\r\n *   2. An array of strings for the simple API\r\n *   3. A single object for the advanced API\r\n *   4. A single string for the simple API\r\n * @returns {Object|Array<Object>} - Options object(s)\r\n */\r\nfunction create (...options) {\r\n  return createElement(ModjoolElement, options, true)\r\n}\r\n\r\n/**\r\n * Creates classes for one or more Modjool elements, using the advanced or simple API\r\n * Returns ModjoolElement class, or array of ModjoolElement classes\r\n * Returned class can be used in customElements.define('tag-name', returnedClass)\r\n * @param  {...Array|Object|String} options - One of four inputs:\r\n *   1. An array of objects for the advanced API\r\n *   2. An array of strings for the simple API\r\n *   3. A single object for the advanced API\r\n *   4. A single string for the simple API\r\n * @returns {Class|Array<Class>} - ModjoolElement class\r\n */\r\nfunction createClass (...options) {\r\n  return createElement(ModjoolElement, options, false)\r\n}\r\n\r\n/**\r\n * Defines all non-defined custom elements\r\n * @returns {Boolean} - True\r\n */\r\nfunction createUndefined () {\r\n  return createElement(ModjoolElement, [], true)\r\n}\r\n\r\n/**\r\n * Set the default options for all following modjool.create() calls. Options are merged\r\n * with the default options.\r\n * @param {Object} defaults - Options to apply\r\n * @returns {Object} - The current options, after merging\r\n */\r\nfunction options (defaults) {\r\n  state.config = { ...state.config,  ...defaults }\r\n  return state.config\r\n}\r\n\r\n/**\r\n * Returns a list of elements that are  defined, and currently attached to the DOM,\r\n * that match the elementTag. If no argument, return all currently defined elements\r\n * @param {String} className - The tag of the custom element\r\n * @returns {Array} - Array of selected elements\r\n */\r\nfunction get (className = '') {\r\n  return state.getElements(className)\r\n}\r\n\r\n/**\r\n * Returns a promise, resolving with the result of modjool.get(), after all custom\r\n * elements have loaded to the DOM\r\n * @param {String} className - The tag of the custom element\r\n * @returns {Promise<Array>} - Promise resolving with the array of selected elements\r\n */\r\nfunction getAsync (className) {\r\n  return wait().then(() => get(className))\r\n}\r\n\r\n/**\r\n * Returns a list of all currently undefined elements\r\n * @returns {NodeList} - A non-live NodeList containing all matched elements\r\n */\r\nfunction getUndefined () {\r\n  return document.querySelectorAll(':not(:defined)')\r\n}\r\n\r\n/**\r\n * Returns a promise, resolving with the result of modjool.getUndefined(), after all\r\n * custom elements have loaded to the DOM\r\n * @returns {Promise<NodeList>} - Promise resolving with the array of selected elements\r\n */\r\nfunction getUndefinedAsync () {\r\n  return wait().then(() => getUndefined())\r\n}\r\n\r\n/**\r\n * Runs func after all Modjool elements have loaded\r\n * @param {Function} func - Function to run\r\n */\r\nfunction complete (func) {\r\n  wait().then(() => func())\r\n}\r\n\r\n/**\r\n * Returns a promise that waits until all Modjool elements have been loaded, then resolves\r\n * @returns {Promise} - Promise that resolves when Modjool loaded\r\n */\r\nfunction wait () {\r\n  // noinspection JSUnusedLocalSymbols\r\n  return new Promise((resolve, reject) => {\r\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\r\n      setTimeout(() => {\r\n        resolve()\r\n      }, 0)\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', () => {\r\n        setTimeout(() => {\r\n          resolve()\r\n        }, 1)\r\n      })\r\n    }\r\n  })\r\n}\r\n","/* global customElements, HTMLElement */\r\nimport createElement from './create.js'\r\n\r\nexport default { create }\r\n\r\n/**\r\n * Creates one or more ModjoolLite elements, using the ModjoolLite API\r\n * @param  {...Array|String} options - One of two inputs:\r\n *   1. An array of strings for the simple API\r\n *   2. A single string for the simple API\r\n * @returns {Boolean} - True if successful, false if not\r\n */\r\nfunction create (...options) {\r\n  return createElement(modjoolLiteElement, options)    \r\n}\r\n\r\n/**\r\n * Creates and defines a ModjoolLite element\r\n * @param {String} elementName - The tag of the custom element\r\n * @returns {Object} - The defined class, tag, and options\r\n */\r\nfunction modjoolLiteElement (elementName) {\r\n  // noinspection JSUnusedLocalSymbols\r\n  class ModjoolLiteElement extends HTMLElement {\r\n    constructor (...args) {\r\n      // noinspection all\r\n      return super(...args)\r\n    }\r\n  }\r\n  return {\r\n    tag: elementName,\r\n    options: elementName,\r\n    class: ModjoolLiteElement\r\n  }\r\n}\r\n"],"names":["config","tag","attr","shadowDom","modjoolId","scopedCss","unhide","reactive","enter","undefined","ready","js","complete","leave","html","css","warnings","classes","elements","addElement","newElement","push","removeElement","oldElement","this","filter","el","getElements","elementTag","mj","func","document","readyState","addEventListener","createElement","options","define","length","Array","isArray","whenReady","defineAll","result","option","createSingle","allSuccessful","every","res","isString","String","customElement","class","customElements","err","console","error","get","list","querySelectorAll","includes","tagName","toLowerCase","nodeName","localName","runLifecycle","context","apiProp","extra","alreadyRunningLifecycle","runningLifecycle","new","instance","findFunction","findAll","strings","str","i","body","querySelector","kebabToCamel","kebabCamelCache","camelToKebab","camelCache","kebabCache","replace","split","map","item","index","charAt","toUpperCase","slice","join","updateAttributes","isConnected","settingAttributes","attributes","prop","startsWith","val","nodeValue","Object","keys","entries","key","setAttr","updateSlots","slot","slotVal","tempId","slotList","htmlString","id","frag","createDocumentFragment","elem","innerHTML","appendChild","bodyContent","s","slotName","getAttribute","outerHTML","shadowSlot","getSlotContent","updateBody","ignoreLifecycle","newHtml","getHtml","newCss","getCss","newBody","currentBody","bodyFrag","addHtml","addCss","deleteElementHtml","tempEl","content","selfSelect","selectorRegex","cssTag","setAttribute","textContent","self","select","match","part","trimStart","regex","regRes","doCommaLoop","styleContent","firstChild","removeChild","updateNew","vals","newVal","advanced","attrName","oldVal","args","loaded","lifecycleName","simple","attrObserver","observer","MutationObserver","mutationList","forEach","mutation","type","attributeName","attributeChanged","oldValue","observe","attributeOldValue","instanceId","Math","random","toString","reactiveAttributes","data","find","rule","element","update","updateSlot","updateAttr","updateAll","remove","host","attrHook","dataHook","dataName","Proxy","set","obj","value","Reflect","arguments","attrProxy","dataInit","dataHookVal","dataProxy","keywords","optionsContainsCustomHook","attachShadow","mode","shadowRoot","constructorRun","adopted","alreadyConnected","connectToDom","initPrivateId","setData","removeAttribute","unhideElement","runAttr","runData","name","attrValue","dataValue","runReactiveHooks","state","dispatchEvent","Event","waitForParentElements","closest","definedFunc","removeEventListener","warn","disconnect","advancedApi","elementType","ModjoolElement","HTMLElement","constructor","polyfill","super","CONSTRUCTOR","OBSERVE","attributeChangedCallback","CHANGED","connectedCallback","CONNECTED","adoptedCallback","ADOPTED","disconnectedCallback","DISCONNECTED","elementCreator","create","createClass","createUndefined","defaults","getAsync","className","wait","then","getUndefined","getUndefinedAsync","Promise","resolve","reject","setTimeout","modjoolLiteElement","elementName","ModjoolLiteElement"],"mappings":"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"}